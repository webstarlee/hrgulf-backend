(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{422:function(e,t,n){"use strict";n.d(t,"a",function(){return c});n(1);var a=n(56),r=n(11),c=(Object(a.b)({enter:"zoomIn",exit:"zoomOut",duration:r.j.TRANSITION_TIME}),Object(a.b)({enter:"fadeIn",exit:"fadeOut",duration:r.j.TRANSITION_TIME}));t.b=a.c},503:function(e,t,n){"use strict";n.d(t,"a",function(){return a});n(1);function a(){window.history.back()}},504:function(e,t,n){"use strict";var a=n(23),r=n(26),c=n(22);t.a={list:function(e){return new Promise(function(t,n){Object(a.a)(r.d,c.a.hire.workplace.questionnaire.list,e).then(function(e){t(e)},function(e){n(e)})})},save:function(e){return new Promise(function(t,n){Object(a.a)(r.d,c.a.hire.workplace.questionnaire.save,e).then(function(e){t(e)},function(e){n(e)})})},get:function(e){return new Promise(function(t,n){Object(a.a)(r.d,c.a.hire.workplace.questionnaire.get,e).then(function(e){t(e)},function(e){n(e)})})},delete:function(e){return new Promise(function(t,n){Object(a.a)(r.d,c.a.hire.workplace.questionnaire.delete,e).then(function(e){t(e)},function(e){n(e)})})}}},717:function(e,t,n){"use strict";n.r(t);var a=n(30),r=n(1),c=n.n(r),o=n(43),i=n(29),l=n(3),s=n(25),u=n(73),m=n(425),E=n(418),d=n(438),O=n(430),S=n(24),N=n(433),I=n(493),f=n(560),b=n(561),R=n.n(b),T=n(11),h=n(5),C=n(124),A=n(422),p=n(503),j=n(504);n(459),n(718);t.default=function(){var e,t=Object(o.h)().params,n=Object(s.b)().t,b=Object(o.g)(),g=Object(S.c)(function(e){return e}).auth.user,v=Object(r.useState)(!1),M=Object(a.a)(v,2),w=M[0],D=M[1],B=Object(r.useState)({}),L=Object(a.a)(B,2),k=L[0],y=L[1],U=Object(r.useState)(),P=Object(a.a)(U,2),_=P[0],x=P[1],W=Object(r.useState)(),K=Object(a.a)(W,2),F=K[0],H=K[1],V=Object(r.useState)(),Q=Object(a.a)(V,2),q=Q[0],z=Q[1],J=Object(r.useState)(I.EditorState.createEmpty()),G=Object(a.a)(J,2),Y=G[0],X=G[1],Z=n("HIRE.WORKPLACE.QUESTIONNAIRE.ADD.".concat(q?"EDIT":"ADD","_QUESTIONNAIRE")),$="".concat(h.a.hire.workplace.questionnaire.all,"/").concat(F||1),ee=h.a.hire.workplace.questionnaire.add,te=N.b().shape({name:N.d().required(n("COMMON.VALIDATION.REQUIRED",{field:n("HIRE.WORKPLACE.QUESTIONNAIRE.FIELDS.NAME")})),minScore:N.d().min(0,n("COMMON.VALIDATION.MIN",{field:n("HIRE.WORKPLACE.QUESTIONNAIRE.FIELDS.MIN_SCORE"),value:0}))});Object(r.useEffect)(function(e){u.animateScroll.scrollToTop({duration:T.j.TRANSITION_TIME})},[]),Object(r.useMemo)(function(e){if(t)try{var n=d.Base64.decode(t),a=JSON.parse(n),r=a.id,c=a.page;x(r),H(c)}catch(e){}},[t,n]),Object(r.useMemo)(function(t){_&&(D(!0),j.a.get({id:_}).then(function(t){if(t.result===T.s.SUCCESS){var n=t.data;z(_);var a=n.name,r=n.description;e&&e.setValues({name:a}),X(I.EditorState.createWithContent(I.ContentState.createFromBlockArray(Object(I.convertFromHTML)(r)))),y({})}else y({show:!0,color:T.b.DANGER,message:t.message});D(!1)}).catch(function(e){y({show:!0,color:T.b.DANGER,message:n("COMMON.ERROR.UNKNOWN_SERVER_ERROR")}),D(!1)}))},[_]);var ne=e=Object(O.b)({initialValues:{name:"",filterByScore:!1,minScore:0},validationSchema:te,onSubmit:function(e,t){var a=t.setSubmitting,r=e.name,c=e.filterByScore,o=e.minScore,i=R()(Object(I.convertToRaw)(Y.getCurrentContent())),l={id:q,userId:g.id,name:r,description:i,minScore:c?o:0};a(!0),j.a.save(l).then(function(e){e.result===T.s.SUCCESS?(A.b.success(e.message),!q&&z(e.data.insertId)):A.b.error(e.message),a(!1)}).catch(function(e){A.b.error(n("COMMON.ERROR.UNKNOWN_SERVER_ERROR")),a(!1)})}}),ae=ne.values,re=ne.touched,ce=ne.errors,oe=ne.setValues,ie=ne.setTouched,le=ne.setErrors,se=ne.handleChange,ue=ne.handleBlur,me=ne.isSubmitting;return c.a.createElement(r.Fragment,null,c.a.createElement(m.Helmet,null,c.a.createElement("title",null,Z," - ",n("SITE_NAME"))),c.a.createElement(l.e,null,c.a.createElement(l.f,null,n("NAVBAR.HIRE.WORKPLACE.ROOT")),c.a.createElement(l.f,null,c.a.createElement(i.b,{to:$},n("NAVBAR.HIRE.WORKPLACE.QUESTIONNAIRE"))),c.a.createElement(l.f,{active:!0},Z)),c.a.createElement(l.S,null,k.show&&c.a.createElement(l.o,{md:"12"},c.a.createElement(E.a,{in:k.show,classNames:"fade-transition",timeout:T.j.TRANSITION_TIME,unmountOnExit:!0,appear:!0},c.a.createElement(l.b,{color:k.color,dismiss:!0,onClosed:function(){return y({})}},k.message))),c.a.createElement(l.o,{md:"12"},c.a.createElement(l.h,null,c.a.createElement(l.i,null,!!w&&c.a.createElement(C.a,null),!w&&c.a.createElement(r.Fragment,null,c.a.createElement("form",{className:"mx-md-4 mx-sm-1 text-left",onSubmit:e.handleSubmit},c.a.createElement(l.S,null,c.a.createElement(l.o,{md:"12"},c.a.createElement(l.A,{id:"name",name:"name",label:n("HIRE.WORKPLACE.QUESTIONNAIRE.FIELDS.NAME"),background:!0,containerClass:"mb-0",value:ae.name,onChange:se,onBlur:ue},!!re.name&&!!ce.name&&c.a.createElement("div",{className:"text-left invalid-field"},ce.name)))),c.a.createElement(l.S,null,c.a.createElement(l.o,{md:"12"},c.a.createElement("div",{className:"text-left"},c.a.createElement("div",{className:"grey-text"},n("HIRE.WORKPLACE.QUESTIONNAIRE.FIELDS.DESCRIPTION")),c.a.createElement(f.Editor,{id:"editor",editorState:Y,wrapperClassName:"questionnaire-wrapper",editorClassName:"questionnaire-editor",onEditorStateChange:X})))),c.a.createElement(l.S,null,c.a.createElement(l.o,{md:"6"},c.a.createElement(l.A,{id:"filterByScore",name:"filterByScore",type:"checkbox",label:n("HIRE.WORKPLACE.QUESTIONNAIRE.FIELDS.FILTER_BY_SCORE"),filled:!0,containerClass:"text-left mt-4 mb-0",checked:ae.filterByScore||!1,onChange:se})),c.a.createElement(l.o,{md:"6"},c.a.createElement(l.A,{id:"minScore",name:"minScore",label:n("HIRE.WORKPLACE.QUESTIONNAIRE.FIELDS.MIN_SCORE"),background:!0,containerClass:"text-left mt-3 mb-0",disabled:!ae.filterByScore,value:ae.minScore,onChange:se,onBlur:ue},!!re.minScore&&!!ce.minScore&&c.a.createElement("div",{className:"text-left invalid-field"},ce.minScore)))),c.a.createElement("div",{className:"mt-4 mb-3"},c.a.createElement(l.g,{type:"submit",color:"primary",size:"sm",rounded:!0,disabled:!!w||!!me||!!ce&&!!Object.keys(ce).length},n("COMMON.BUTTON.".concat(q?"EDIT":"ADD"))),c.a.createElement(l.g,{type:"button",color:"indigo",size:"sm",rounded:!0,onClick:function(e){return function(e){var t=e.setValues,n=e.setTouched,a=e.setErrors;t({name:""}),n({}),a({}),y({}),z(void 0),b.location.pathname!==ee&&b.push(ee)}({setValues:oe,setTouched:ie,setErrors:le})}},n("COMMON.BUTTON.NEW")),c.a.createElement(l.g,{type:"button",color:"warning",size:"sm",rounded:!0,onClick:p.a},n("COMMON.BUTTON.BACK"))))))))),c.a.createElement(l.cb,{className:"text-left",position:"ltr"===n("DIRECTION")?"top-right":"top-left",dir:n("DIRECTION"),hideProgressBar:!0,autoClose:T.j.TRANSITION_TIME5,closeButton:!1,transition:A.a}))}},718:function(e,t,n){}}]);