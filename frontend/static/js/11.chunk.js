(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{425:function(e,t,n){"use strict";n.d(t,"a",function(){return c});n(1);var a=n(54),r=n(11),c=(Object(a.b)({enter:"zoomIn",exit:"zoomOut",duration:r.i.TRANSITION_TIME}),Object(a.b)({enter:"fadeIn",exit:"fadeOut",duration:r.i.TRANSITION_TIME}));t.b=a.c},452:function(e,t,n){"use strict";var a=n(28),r=n(1);t.a=function(e,t){var n=Object(r.useState)(e),c=Object(a.a)(n,2),l=c[0],i=c[1];return Object(r.useEffect)(function(n){var a=setTimeout(function(){i(e)},t);return function(){return clearTimeout(a)}},[e]),l}},470:function(e,t,n){"use strict";n.d(t,"a",function(){return a});n(1);function a(){window.history.back()}},471:function(e,t,n){"use strict";var a=n(24),r=n(29),c=n(26);t.a={list:function(e){return new Promise(function(t,n){Object(a.a)(r.d,c.a.hire.workplace.questionnaire.list,e).then(function(e){t(e)},function(e){n(e)})})},save:function(e){return new Promise(function(t,n){Object(a.a)(r.d,c.a.hire.workplace.questionnaire.save,e).then(function(e){t(e)},function(e){n(e)})})},get:function(e){return new Promise(function(t,n){Object(a.a)(r.d,c.a.hire.workplace.questionnaire.get,e).then(function(e){t(e)},function(e){n(e)})})},delete:function(e){return new Promise(function(t,n){Object(a.a)(r.d,c.a.hire.workplace.questionnaire.delete,e).then(function(e){t(e)},function(e){n(e)})})},listQuestions:function(e){return new Promise(function(t,n){Object(a.a)(r.d,c.a.hire.workplace.questionnaire.listQuestions,e).then(function(e){t(e)},function(e){n(e)})})},saveQuestion:function(e){return new Promise(function(t,n){Object(a.a)(r.d,c.a.hire.workplace.questionnaire.saveQuestion,e).then(function(e){t(e)},function(e){n(e)})})},getQuestion:function(e){return new Promise(function(t,n){Object(a.a)(r.d,c.a.hire.workplace.questionnaire.getQuestion,e).then(function(e){t(e)},function(e){n(e)})})},deleteQuestion:function(e){return new Promise(function(t,n){Object(a.a)(r.d,c.a.hire.workplace.questionnaire.deleteQuestion,e).then(function(e){t(e)},function(e){n(e)})})}}},697:function(e,t,n){},698:function(e,t,n){},703:function(e,t,n){"use strict";n.r(t);var a=n(28),r=n(1),c=n.n(r),l=n(43),i=n(33),E=n(3),o=n(22),s=n(71),u=n(428),m=n(448),O=n(25),N=n(11),d=n(5),S=n(418),I=n(438),T=n(437),f=n(490),R=n(558),A=n(559),C=n.n(A),h=n(120),b=n(425),w=n(470),g=n(471),U=(n(500),n(697),n(122)),p=n(452),v=function(e){var t,n=e.items,l=e.onItemsChanged,i=(e.onLoading,Object(o.b)().t),s=Object(r.useState)({}),u=Object(a.a)(s,2),m=(u[0],u[1],Object(r.useState)(!1)),O=Object(a.a)(m,2),d=O[0],S=O[1],f=Object(r.useState)(!1),R=Object(a.a)(f,2),A=R[0],C=R[1],h=Object(r.useState)({}),b=Object(a.a)(h,2),g=b[0],v=b[1],Q=Object(r.useState)(""),L=Object(a.a)(Q,2),M=(L[0],L[1],Object(r.useState)([])),P=Object(a.a)(M,2),D=P[0],y=P[1],j={index:-1,question:"",type:N.r.QUESTION.TYPE.YES_NO,answers:"",required:!1,hasCorrectAnswer:!1,correctAnswer:""},B=T.b().shape({question:T.c().required(i("COMMON.VALIDATION.REQUIRED",{field:i("HIRE.WORKPLACE.QUESTIONNAIRE.FIELDS.QUESTION")})),answers:T.c().test("answers-test",i("COMMON.VALIDATION.REQUIRED",{field:i("HIRE.WORKPLACE.QUESTIONNAIRE.FIELDS.ANSWERS")}),function(e){var t=this.parent.type;return e=e?e.trim():"",t!==N.r.QUESTION.TYPE.SELECT||!!e.length}),correctAnswer:T.c().test("correctAnswer-test",i("COMMON.VALIDATION.REQUIRED",{field:i("HIRE.WORKPLACE.QUESTIONNAIRE.FIELDS.CORRECT_ANSWER")}),function(e){var t=this.parent.hasCorrectAnswer;return e=e?e.trim():"",!t||!!e.length})}),k=function(e){n.splice(g.deleteId,1),l(n),C(!1)},K=function(e){t.setValues(j),t.setTouched({}),t.setErrors({}),S(!0)},W=t=Object(I.b)({initialValues:j,validationSchema:B,onSubmit:function(e,a){var r,c=a.setSubmitting,i=e.index,E=e.question,o=e.type,s=e.answers,u=e.required,m=e.hasCorrectAnswer,O=e.correctAnswer;c(!0);var N={number:-1===i?n.length+1:i,question:E,type:o,answers:s||"",required:u,hasCorrectAnswer:m,correctAnswer:O||""};-1===i?(r=n.concat([N]),t.setFieldValue("index",n.length),l(r)):(n.splice(i,1,N),l(n)),S(!1),c(!1)}}),q=W.values,_=W.touched,Y=W.errors,x=(W.setValues,W.setTouched,W.setErrors,W.handleChange),H=W.handleBlur,F=W.isSubmitting,V=Object(p.a)(q.answers,N.h.DELAY2);Object(r.useMemo)(function(e){console.log(V);var t=V.split(",").filter(function(e){return!!e.trim().length});y(t)},[V]);return c.a.createElement("div",{className:"text-left mt-4"},c.a.createElement(E.K,null,c.a.createElement(E.i,{md:"7",className:"text-left"},c.a.createElement("h4",{className:"h4-responsive"},i("HIRE.WORKPLACE.QUESTIONNAIRE.QUESTIONS.QUESTIONS"))),c.a.createElement(E.i,{md:"5",className:"text-right"},c.a.createElement(E.f,{type:"button",color:"primary",size:"sm",rounded:!0,onClick:K},i("COMMON.BUTTON.ADD")),c.a.createElement(E.f,{type:"button",color:"warning",size:"sm",rounded:!0,onClick:w.a},i("COMMON.BUTTON.BACK")))),c.a.createElement(E.R,{responsive:!0,striped:!0},c.a.createElement(E.T,null,c.a.createElement("tr",{className:""},c.a.createElement("th",{className:"nomer-col"},"#"),c.a.createElement("th",null,i("HIRE.WORKPLACE.QUESTIONNAIRE.FIELDS.QUESTION")),c.a.createElement("th",null,i("HIRE.WORKPLACE.QUESTIONNAIRE.FIELDS.TYPE")),c.a.createElement("th",null,i("HIRE.WORKPLACE.QUESTIONNAIRE.FIELDS.CORRECT_ANSWER")),c.a.createElement("th",{className:"p-2 edit-col-2"}))),c.a.createElement(E.S,null,!!n.length&&n.map(function(e,t){return c.a.createElement("tr",{key:t,className:""},c.a.createElement("td",null,t+1),c.a.createElement("td",null,e.question),c.a.createElement("td",null,e.type===N.r.QUESTION.TYPE.YES_NO&&i("COMMON.QUESTIONNAIRE.QUESTION_TYPE.YES_NO"),e.type===N.r.QUESTION.TYPE.SELECT&&i("COMMON.QUESTIONNAIRE.QUESTION_TYPE.SELECT"),e.type===N.r.QUESTION.TYPE.TEXT&&i("COMMON.QUESTIONNAIRE.QUESTION_TYPE.TEXT")),c.a.createElement("td",null,e.hasCorrectAnswer?e.correctAnswer:""),c.a.createElement("td",{className:"edit-col"},c.a.createElement(E.f,{tag:"a",floating:!0,color:"secondary",size:"sm"},c.a.createElement(E.q,{icon:"edit"})),c.a.createElement(E.f,{tag:"a",floating:!0,color:"danger",size:"sm",className:"ml-2",onClick:function(n){return function(e,t){v(Object.assign({},g,{show:!0,title:i("COMMON.BUTTON.DELETE"),message:i("COMMON.QUESTION.DELETE",{item:e.question}),deleteId:t})),C(!0)}(e,t)}},c.a.createElement(E.q,{icon:"trash"}))))}))),c.a.createElement(E.u,{isOpen:d,toggle:function(e){},centered:!0,size:"lg"},c.a.createElement(E.x,{toggle:function(e){return S(!d)}},i("HIRE.WORKPLACE.QUESTIONNAIRE.FIELDS.QUESTION")),c.a.createElement(E.v,null,c.a.createElement("form",{onSubmit:t.handleSubmit},c.a.createElement("input",{hidden:!0,id:"type",name:"type",onChange:x,onBlur:H}),c.a.createElement("input",{hidden:!0,id:"correctAnswer",name:"correctAnswer",onChange:x,onBlur:H}),c.a.createElement(E.K,null,c.a.createElement(E.i,{md:"12"},c.a.createElement(E.s,{id:"question",name:"question",label:i("HIRE.WORKPLACE.QUESTIONNAIRE.FIELDS.QUESTION"),background:!0,containerClass:"my-0",value:q.question,onChange:x,onBlur:H},!!_.question&&!!Y.question&&c.a.createElement("div",{className:"text-left invalid-field"},Y.question)))),c.a.createElement(E.K,null,c.a.createElement(E.i,{md:"6",className:"mt-3"},c.a.createElement(E.L,{label:i("HIRE.WORKPLACE.QUESTIONNAIRE.FIELDS.TYPE"),className:"mt-3 mb-0 white",selected:q.type,getValue:function(e){U.a.triggerChangeEvent("type",e[0])}},c.a.createElement(E.M,null),c.a.createElement(E.O,null,c.a.createElement(E.N,{value:N.r.QUESTION.TYPE.YES_NO,checked:q.type===N.r.QUESTION.TYPE.YES_NO},i("COMMON.QUESTIONNAIRE.QUESTION_TYPE.YES_NO")),c.a.createElement(E.N,{value:N.r.QUESTION.TYPE.SELECT,checked:q.type===N.r.QUESTION.TYPE.SELECT},i("COMMON.QUESTIONNAIRE.QUESTION_TYPE.SELECT")),c.a.createElement(E.N,{value:N.r.QUESTION.TYPE.TEXT,checked:q.type===N.r.QUESTION.TYPE.TEXT},i("COMMON.QUESTIONNAIRE.QUESTION_TYPE.TEXT")))),!!_.location&&!!Y.location&&c.a.createElement("div",{className:"text-left invalid-field"},Y.location))),q.type===N.r.QUESTION.TYPE.SELECT&&c.a.createElement(E.K,null,c.a.createElement(E.i,{md:"12"},c.a.createElement(E.s,{id:"answers",name:"answers",placeHolder:i("HIRE.WORKPLACE.QUESTIONNAIRE.QUESTIONS.ANSWERS_PLACEHOLDER"),background:!0,containerClass:"mb-0",value:q.answers,onChange:x,onBlur:H},!!_.answers&&!!Y.answers&&c.a.createElement("div",{className:"text-left invalid-field"},Y.answers)))),c.a.createElement(E.K,null,c.a.createElement(E.i,{md:"12"},c.a.createElement(E.s,{id:"required",name:"required",label:i("HIRE.WORKPLACE.QUESTIONNAIRE.FIELDS.REQUIRED"),containerClass:"mt-3",type:"checkbox",filled:!0,checked:q.required,onChange:x,onBlur:H},!!_.required&&!!Y.required&&c.a.createElement("div",{className:"text-left invalid-field"},Y.required)))),c.a.createElement(E.K,null,c.a.createElement(E.i,{md:"12"},c.a.createElement(E.s,{id:"hasCorrectAnswer",name:"hasCorrectAnswer",label:i("HIRE.WORKPLACE.QUESTIONNAIRE.FIELDS.HAS_CORRECT_ANSWER"),containerClass:"mt-3",type:"checkbox",filled:!0,checked:q.hasCorrectAnswer,onChange:x,onBlur:H},!!_.hasCorrectAnswer&&!!Y.hasCorrectAnswer&&c.a.createElement("div",{className:"text-left invalid-field"},Y.hasCorrectAnswer)))),q.hasCorrectAnswer&&q.type===N.r.QUESTION.TYPE.YES_NO&&c.a.createElement(E.K,null,c.a.createElement(E.i,{md:"6",className:"mt-0"},c.a.createElement(E.L,{label:i("HIRE.WORKPLACE.QUESTIONNAIRE.FIELDS.CORRECT_ANSWER"),className:"mt-4 mb-0 white",selected:q.correctAnswer,getValue:function(e){U.a.triggerChangeEvent("correctAnswer",e[0])}},c.a.createElement(E.M,null),c.a.createElement(E.O,null,c.a.createElement(E.N,{value:N.r.ANSWER.YES,checked:q.correctAnswer===N.r.ANSWER.YES},i("COMMON.BUTTON.YES")),c.a.createElement(E.N,{value:N.r.ANSWER.NO,checked:q.correctAnswer===N.r.ANSWER.NO},i("COMMON.BUTTON.NO")))),!!_.correctAnswer&&!!Y.correctAnswer&&c.a.createElement("div",{className:"text-left invalid-field"},Y.correctAnswer))),q.hasCorrectAnswer&&q.type===N.r.QUESTION.TYPE.SELECT&&c.a.createElement(E.K,null,c.a.createElement(E.i,{md:"6",className:"mt-0"},c.a.createElement(E.L,{label:i("HIRE.WORKPLACE.QUESTIONNAIRE.FIELDS.CORRECT_ANSWER"),className:"mt-4 mb-0 white",selected:q.correctAnswer,getValue:function(e){U.a.triggerChangeEvent("correctAnswer",e[0])}},c.a.createElement(E.M,null),c.a.createElement(E.O,null,D.map(function(e,t){return c.a.createElement(E.N,{key:t,value:e,checked:q.correctAnswer===e},e)}))),!!_.correctAnswer&&!!Y.correctAnswer&&c.a.createElement("div",{className:"text-left invalid-field"},Y.correctAnswer))),q.hasCorrectAnswer&&q.type===N.r.QUESTION.TYPE.TEXT&&c.a.createElement(E.K,null,c.a.createElement(E.i,{md:"12"},c.a.createElement(E.s,{id:"correctAnswer",name:"correctAnswer",label:i("HIRE.WORKPLACE.QUESTIONNAIRE.FIELDS.CORRECT_ANSWER"),containerClass:"mt-3",background:!0,value:q.correctAnswer,onChange:x,onBlur:H},!!_.correctAnswer&&!!Y.correctAnswer&&c.a.createElement("div",{className:"text-left invalid-field"},Y.correctAnswer)))))),c.a.createElement(E.w,null,c.a.createElement(E.f,{color:"secondary",size:"sm",rounded:!0,onClick:function(e){return S(!d)}},"Close"),c.a.createElement(E.f,{color:"primary",size:"sm",rounded:!0,onClick:t.handleSubmit,disabled:!!F},i("COMMON.BUTTON.SAVE")))),c.a.createElement(E.u,{isOpen:A,toggle:function(e){},centered:!0},c.a.createElement(E.x,{toggle:function(e){return C(!A)}},g.title),c.a.createElement(E.v,{className:"text-left"},g.message),c.a.createElement(E.w,null,c.a.createElement(E.f,{type:"button",color:"secondary",size:"sm",rounded:!0,onClick:function(e){return C(!A)}},i("COMMON.BUTTON.CANCEL")),c.a.createElement(E.f,{type:"button",color:"danger",size:"sm",rounded:!0,onClick:k},i("COMMON.BUTTON.DELETE")))))},Q=function(e){var t,n=e.id,i=e.addUrl,s=(e.backUrl,e.showNewButton),m=Object(o.b)().t,d=Object(l.g)(),A=Object(O.c)(function(e){return e}).auth.user,U=Object(r.useState)(!1),p=Object(a.a)(U,2),Q=p[0],L=p[1],M=Object(r.useState)(!1),P=Object(a.a)(M,2),D=P[0],y=P[1],j=Object(r.useState)({}),B=Object(a.a)(j,2),k=B[0],K=B[1],W=Object(r.useState)(),q=Object(a.a)(W,2),_=q[0],Y=q[1],x=Object(r.useState)(f.EditorState.createEmpty()),H=Object(a.a)(x,2),F=H[0],V=H[1],z=Object(r.useState)([]),X=Object(a.a)(z,2),J=X[0],G=X[1],Z=m("HIRE.WORKPLACE.QUESTIONNAIRE.ADD.".concat(_?"EDIT":"ADD","_QUESTIONNAIRE")),$=T.b().shape({name:T.c().required(m("COMMON.VALIDATION.REQUIRED",{field:m("HIRE.WORKPLACE.QUESTIONNAIRE.FIELDS.NAME")})),minScore:T.c().min(0,m("COMMON.VALIDATION.MIN",{field:m("HIRE.WORKPLACE.QUESTIONNAIRE.FIELDS.MIN_SCORE"),value:0})).test("min-score",m("COMMON.VALIDATION.MIN",{field:m("HIRE.WORKPLACE.QUESTIONNAIRE.FIELDS.MIN_SCORE"),value:0}),function(e){return!this.parent.filterByScore||e>=0})});Object(r.useMemo)(function(e){n&&(L(!0),g.a.get({id:n}).then(function(e){if(e.result===N.s.SUCCESS){var a=e.data;Y(n);var r=a.name,c=a.description,l=a.filterByScore,i=a.minScore;t&&t.setValues({name:r,filterByScore:l,minScore:i}),V(f.EditorState.createWithContent(f.ContentState.createFromBlockArray(Object(f.convertFromHTML)(c)))),K({})}else K({show:!0,color:N.b.DANGER,message:e.message});L(!1)}).catch(function(e){K({show:!0,color:N.b.DANGER,message:m("COMMON.ERROR.UNKNOWN_SERVER_ERROR")}),L(!1)}),y(!0),g.a.listQuestions({questionnaireId:n}).then(function(e){e.result===N.s.SUCCESS?G(e.data):G([]),y(!1)}).catch(function(e){G([]),y(!1)}))},[n]);var ee=t=Object(I.b)({initialValues:{name:"",filterByScore:!1,minScore:0},validationSchema:$,onSubmit:function(e,t){var n=t.setSubmitting,a=e.name,r=e.filterByScore,c=e.minScore,l=C()(Object(f.convertToRaw)(F.getCurrentContent())),i={id:_,userId:A.id,name:a,description:l,filterByScore:r||!1,minScore:c};n(!0),g.a.save({questionnaire:i,questions:J}).then(function(e){e.result===N.s.SUCCESS?(b.b.success(e.message),!_&&Y(e.data.insertId)):b.b.error(e.message),n(!1)}).catch(function(e){b.b.error(m("COMMON.ERROR.UNKNOWN_SERVER_ERROR")),n(!1)})}}),te=ee.values,ne=ee.touched,ae=ee.errors,re=ee.setValues,ce=ee.setTouched,le=ee.setErrors,ie=ee.handleChange,Ee=ee.handleBlur,oe=ee.isSubmitting;return c.a.createElement(r.Fragment,null,c.a.createElement(u.Helmet,null,c.a.createElement("title",null,Z," - ",m("SITE_NAME"))),c.a.createElement(E.K,null,k.show&&c.a.createElement(E.i,{md:"12"},c.a.createElement(S.a,{in:k.show,classNames:"fade-transition",timeout:N.i.TRANSITION_TIME,unmountOnExit:!0,appear:!0},c.a.createElement(E.b,{color:k.color,dismiss:!0,onClosed:function(){return K({})}},k.message))),c.a.createElement(E.i,{md:"12"},c.a.createElement(E.g,null,c.a.createElement(E.h,null,!!Q&&c.a.createElement(h.a,null),!Q&&c.a.createElement(r.Fragment,null,c.a.createElement("form",{className:"mx-md-4 mx-sm-1 text-left",onSubmit:t.handleSubmit},c.a.createElement(E.K,null,c.a.createElement(E.i,{md:"12"},c.a.createElement(E.s,{id:"name",name:"name",label:m("HIRE.WORKPLACE.QUESTIONNAIRE.FIELDS.NAME"),background:!0,containerClass:"mb-0",value:te.name,onChange:ie,onBlur:Ee},!!ne.name&&!!ae.name&&c.a.createElement("div",{className:"text-left invalid-field"},ae.name)))),c.a.createElement(E.K,null,c.a.createElement(E.i,{md:"12"},c.a.createElement("div",{className:"text-left"},c.a.createElement("div",{className:"grey-text"},m("HIRE.WORKPLACE.QUESTIONNAIRE.FIELDS.DESCRIPTION")),c.a.createElement(R.Editor,{id:"editor",editorState:F,wrapperClassName:"questionnaire-wrapper",editorClassName:"questionnaire-editor",onEditorStateChange:V})))),c.a.createElement(E.K,null,c.a.createElement(E.i,{md:"6"},c.a.createElement(E.s,{id:"filterByScore",name:"filterByScore",type:"checkbox",label:m("HIRE.WORKPLACE.QUESTIONNAIRE.FIELDS.FILTER_BY_SCORE"),filled:!0,containerClass:"text-left mt-4 mb-0",checked:te.filterByScore||!1,onChange:ie})),c.a.createElement(E.i,{md:"6"},c.a.createElement(E.s,{id:"minScore",name:"minScore",type:"number",label:m("HIRE.WORKPLACE.QUESTIONNAIRE.FIELDS.MIN_SCORE"),background:!0,containerClass:"text-left mt-3 mb-0",disabled:!te.filterByScore,value:te.minScore,onChange:ie,onBlur:Ee},!!ae.minScore&&c.a.createElement("div",{className:"text-left invalid-field"},ae.minScore)))),c.a.createElement("div",{className:"mt-4 mb-3"},c.a.createElement(E.f,{type:"submit",color:"primary",size:"sm",rounded:!0,disabled:!!Q||!!D||!!oe||!J.length},m("COMMON.BUTTON.".concat(_?"EDIT":"ADD"))),!!s&&c.a.createElement(E.f,{type:"button",color:"indigo",size:"sm",rounded:!0,onClick:function(e){return function(e){var t=e.setValues,n=e.setTouched,a=e.setErrors;t({name:"",filterByScore:!1,minScore:0}),V(f.EditorState.createEmpty()),n({}),a({}),K({}),Y(void 0),d.location.pathname!==i&&d.push(i)}({setValues:re,setTouched:ce,setErrors:le})}},m("COMMON.BUTTON.NEW")),c.a.createElement(E.f,{type:"button",color:"warning",size:"sm",rounded:!0,onClick:w.a},m("COMMON.BUTTON.BACK")))),c.a.createElement("hr",null),c.a.createElement(v,{items:J,onItemsChanged:G,onLoading:y})))))),c.a.createElement(E.W,{className:"text-left",position:"ltr"===m("DIRECTION")?"top-right":"top-left",dir:m("DIRECTION"),hideProgressBar:!0,autoClose:N.i.TRANSITION_TIME5,closeButton:!1,transition:b.a}))};n(698),t.default=function(){var e=Object(l.h)().params,t=Object(o.b)().t,n=Object(r.useState)({}),O=Object(a.a)(n,2),S=O[0],I=O[1],T=t("HIRE.WORKPLACE.QUESTIONNAIRE.ADD.".concat(S.id?"EDIT":"ADD","_QUESTIONNAIRE")),f="".concat(d.a.hire.workplace.questionnaire.all,"/").concat(S.page||1),R="".concat(d.a.hire.workplace.questionnaire.add,"/").concat(m.Base64.encode(JSON.stringify({page:S.page})));Object(r.useEffect)(function(e){s.animateScroll.scrollToTop({duration:N.i.TRANSITION_TIME})},[]),Object(r.useMemo)(function(t){if(e)try{var n=m.Base64.decode(e),a=JSON.parse(n);I(a)}catch(t){}},[e,t]);return c.a.createElement(r.Fragment,null,c.a.createElement(u.Helmet,null,c.a.createElement("title",null,T," - ",t("SITE_NAME"))),c.a.createElement(E.d,null,c.a.createElement(E.e,null,t("NAVBAR.HIRE.WORKPLACE.ROOT")),c.a.createElement(E.e,null,c.a.createElement(i.b,{to:f},t("NAVBAR.HIRE.WORKPLACE.QUESTIONNAIRE"))),c.a.createElement(E.e,{active:!0},T)),c.a.createElement(Q,{id:S.id,addUrl:R,backUrl:f,showNewButton:!0}))}}}]);